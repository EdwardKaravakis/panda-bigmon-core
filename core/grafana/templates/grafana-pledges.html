{% extends "_base_core.html" %}
{% load humanize %}
{% load static %}
{% block page_title %}Pledges{% endblock %}
{% block subtitle %} Pledges
{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" type="text/css"
          href="{% static "js/datatables/DataTables-1.10.13/css/dataTables.foundation.css" %}"/>
    <link rel="stylesheet" href="{% static 'js/jquery-ui/jquery-ui.css' %}">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.5.6/css/buttons.dataTables.min.css">
{% endblock %}
{% block extra_js %}
    <script src="{% static 'js/datatables/DataTables-1.10.13/js/jquery.dataTables.js' %}"></script>
    <script src="{% static 'js/datatables/DataTables-1.10.13/js/dataTables.foundation.js' %}"></script>
    <script type="text/javascript" src="/static/js/datatables/dataTables.rowsGroup.js"></script>
    <script type="text/javascript" src="{% static "/js/jquery.shorten.1.0.js" %}"></script>
    <script type="text/javascript" src="/static/js/datatables/moment.min.js"></script>
    <script type="text/javascript" src="/static/js/datatables/datetime-moment.js"></script>
    <script type="text/javascript" src="/static/js/datatables/datetime.js"></script>
    <script type="text/javascript" src="/static/js/datatables/jquery-ui.js"></script>

    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.flash.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.print.min.js"></script>
{% endblock %}
{% block body %}
    <table>
        <tr>
            <td><strong><font size="4">Selected time range: {{ date_from|safe }} - {{ date_to|safe }} (Days: {{ days|safe }}) </font></strong>
            </td>
        </tr>
    </table>
    <script>
        $(document).ready(function () {
            $('#federations').dataTable({
                dom: 'Bfrtip',
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                "iDisplayLength": 100,
                "ajax": {
                    "processing": true,
                    "url": "{% url 'grafana_pledges' %}?type=federation&date_from={{ date_from|safe }}&date_to={{ date_to|safe }}",
                    "dataSrc": ''
                },
                "aoColumns": [
                    {
                        data: "dst_federation",
                        sDefaultContent: "",
                    },
                    {
                        data: "hs06sec",
                        sDefaultContent: "",
                    },
                    {
                        data: "pledges",
                        sDefaultContent: "",
                    }
                ]

            });
            $('#countries').dataTable({
                dom: 'Bfrtip',
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                "iDisplayLength": 100,
                "ajax": {
                    "processing": true,
                    "url": "{% url 'grafana_pledges' %}?type=country&date_from={{ date_from|safe }}&date_to={{ date_to|safe }}",
                    "dataSrc": ''
                },
                "aoColumns": [
                    {
                        data: "dst_country",
                        sDefaultContent: "",
                    },
                    {
                        data: "hs06sec",
                        sDefaultContent: "",
                    },
                    {
                        data: "pledges",
                        sDefaultContent: "",
                    }]
            });
        });
    </script>
    <table id="federations" style="width: 100%">
        <caption style="height: 30px;vertical-align: middle">HS06 days and pledges by federation</caption>
        <thead>

        <th>Federation</th>
        <th>HS06 days</th>
        <th>Pledges</th>
        </thead>
        <tbody>
        </tbody>
        <tfoot>
        <tr>
            <th></th>
            <th></th>
            <th></th>
        </tr>
        </tfoot>
    </table>
    <br/>
    <hr/>
    <br/>
    <table id="countries" style="width: 100%">
        <caption style="height: 30px;vertical-align: middle">HS06 days and pledges by country</caption>
        <thead>
        <th>Country</th>
        <th>HS06 days</th>
        <th>Pledges</th>
        </thead>
        <tbody>
        </tbody>
        <tfoot>
        <tr>
            <th></th>
            <th></th>
            <th></th>
        </tr>
        </tfoot>
    </table>
{% endblock %}